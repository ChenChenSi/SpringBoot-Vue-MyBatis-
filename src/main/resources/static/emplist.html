<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>emplist</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
</head>
<body>
<div id="wrap">
    <div id="top_content">
        <div id="header">
            <div id="rightheader">
                <p>
                    2009/11/20
                    <br/>
					<a href="javascript:;" @click="logout">安全退出</a>>
                </p>
            </div>
            <div id="topheader">
                <h1 id="title">
                    <a href="/ems_vue/emplist.html">main</a>
                </h1>
            </div>
            <div id="navigation">
            </div>
        </div>
        <div id="content">
            <p id="whereami">
            </p>
            <h1>
                Welcome {{user.realName}} !
            </h1>
            <table class="table">
                <tr class="table_header">
                    <td>
                        ID
                    </td>
                    <td>
                        Name
                    </td>
                    <td>
                        Photo
                    </td>
                    <td>
                        Salary
                    </td>
                    <td>
                        Age
                    </td>
                    <td>
                        Operation
                    </td>
                </tr>
                <tr class="row1">
                    <td>
                        1
                    </td>
                    <td>
                        zhangshan
                    </td>
                    <td>
                        <img src="./img/nane.gif" style="height: 60px;">
                    </td>
                    <td>
                        20000
                    </td>
                    <td>
                        20
                    </td>
                    <td>
                        <a href="emplist.html">delete emp</a>&nbsp;<a href="updateEmp.html">update emp</a>
                    </td>
                </tr>
                <tr class="row2">
                    <td>
                        2
                    </td>
                    <td>
                        lishi
                    </td>
                    <td>
                        <img src="./img/nane.gif" style="height: 60px;">
                    </td>
                    <td>
                        20000
                    </td>
                    <td>
                        20
                    </td>
                    <td>
                        <a href="emplist.html">delete emp</a>&nbsp;<a href="updateEmp.html">update emp</a>
                    </td>
                </tr>
            </table>
            <p>
                <input type="button" class="button" value="Add Employee" onclick="location='addEmp.html'"/>
            </p>
        </div>
    </div>
    <div id="footer">
        <div id="footer_bg">
            ABC@126.com
        </div>
    </div>
</div>
</body>
</html>
<!--vue导入-->
<script src="/ems_vue/js/vue.js"></script>
<!--异步请求导入-->
<script src="/ems_vue/js/axios.min.js"></script>
<script>
    <!--	vue实例-->
    var app = new Vue({
        //挂载作用域
        //从register.html中可得知，整个都是由wrap包裹起来
        //所以作用域传wrap进来即可
        el: "#wrap",
        //作用域中获取的数据
        data: {	//数据
            user: {}	//用来存放用户登录信息
        },
        methods: {	//自定义函数
			//安全退出
			logout(){
				localStorage.removeItem("user");
				location.reload(true);//刷新页面
			}
        },

        created() {		//生命周期函数，页面渲染前调用
            //取出在登录后，后台返回的用户信息
            //该信息，以JSON的格式存在localStorage的Item中
            var userString = localStorage.getItem("user");
            if (userString) {
				//按JSON的形式解析数据，并存进user对象中
				this.user = JSON.parse(userString);
				//console.log(user);
            } else {
            	alert("您尚未登录，点击确定跳转至登录！")
            	location.href="http://localhost:8989/ems_vue/login.html";
            }

        }


    })
</script>
